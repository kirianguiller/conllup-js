!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.conllup=n():t.conllup=n()}(self,(function(){return(()=>{"use strict";var t={989:(t,n,e)=>{e.d(n,{default:()=>J});const o={0:{label:"ID",type:"str"},1:{label:"FORM",type:"str"},2:{label:"LEMMA",type:"str"},3:{label:"UPOS",type:"str"},4:{label:"XPOS",type:"str"},5:{label:"FEATS",type:"dict"},6:{label:"HEAD",type:"int"},7:{label:"DEPREL",type:"str"},8:{label:"DEPS",type:"dict"},9:{label:"MISC",type:"dict"}},s=(t,n)=>["FORM","LEMMA"].includes(n.label)?t:["-","â€“"].includes(t)?"_":t,r=(t,n)=>{if("str"===n)return t;if("int"===n)return"_"===t?-1:parseInt(t,10);if("dict"===n)return(t=>{const n={};if("_"===t)return n;const e=t.split("|");for(const t of e){const e=t.split("="),o=e[0],s=e.slice(1).join("=");n[o]=s}return n})(t);throw new Error(`${n} is not a correct type`)},c=t=>{const n=t.trim().split("\t");if(10!==n.length)throw new Error(`CONLL PARSING ERROR : line "${t}" is not valid, ${n.length} columns found instead of 10`);const e={ID:"_",FORM:"_",LEMMA:"_",UPOS:"_",XPOS:"_",FEATS:{},HEAD:-1,DEPREL:"_",DEPS:{},MISC:{}};for(const t in o)if(o.hasOwnProperty(t)){const c=o[t],i=s(n[t],c),l=c.label,p=c.type;e[l]=r(i,p)}return e},i=(t,n)=>{if("str"===n)return t;if("int"===n)return-1===t?"_":t.toString();if("dict"===n)return(t=>{const n=[];for(const e in t){if(!t.hasOwnProperty(e))throw Error(`featureJson don't possess the key '${e}'`);{const o=t[e];n.push(`${e}=${o}`)}}let e=n.join("|");return""===e&&(e="_"),e})(t);throw new Error(`${n} is not a correct type`)},l=t=>{const n=[];for(const e in o)if(o.hasOwnProperty(e)){const s=o[e],r=s.label,c=s.type,l=t[r],p=i(l,c);n.push(p)}return n.join("\t")},p=(t,n)=>{const e=parseInt(t.split("-")[0],10),o=parseInt(n.split("-")[0],10);return e-o!=0?e-o:n.length-t.length},f=t=>t.ID.indexOf("-")>-1,u=(t,n,e,o)=>{if(f(t)){const[s,r]=t.ID.split("-"),c=a(parseInt(s,10),n,e,o),i=a(parseInt(r,10),n,e,o);if(-1!==c&&-1!==i){const n=`${c}-${i}`;t.ID=n}else t.ID="-1"}else{const s=t.ID,r=a(parseInt(s,10),n,e,o);t.ID=r.toString()}const s=t.HEAD;if(-1!==s){const r=a(s,n,e,o);t.HEAD=r}return t},a=(t,n,e,o)=>t<n?t:t>e?t+o:-1,d=[["\\s","s"],["\\\\t","\t"],["\\\\n","\n"],["\\\\v","\v"],["\\\\f","\f"],["\\\\r","\r"]],J={sentenceConllToJson:t=>{const n={metaJson:{},treeJson:{nodesJson:{},groupsJson:{}}},{metaLines:e,treeLines:o}=(t=>{const n=t.trim().split("\n"),e=[],o=[];for(const t of n){const n=t.trim();n.startsWith("#")?e.push(n):(s=n.slice(0,1),/^\d+$/.test(s)?o.push(n):console.log(`Warning: line didnt't start with a digit or '#' : "${n}" `))}var s;return{metaLines:e,treeLines:o}})(t);return n.metaJson=(t=>{const n={};for(const e of t){const[t,o]=e.split(" = ");n[t.slice(2)]=o}return n})(e),n.treeJson=(t=>{const n={nodesJson:{},groupsJson:{}};for(const e of t){const t=c(e);!0===f(t)?n.groupsJson[t.ID]=t:n.nodesJson[t.ID]=t}return n})(o),n},sentenceJsonToConll:t=>{let n=(t=>{const n=[];for(const e in t){if(!t.hasOwnProperty(e))throw Error(`metaJson don't possess the key '${e}'`);{const o=`# ${e} = ${t[e]}`;n.push(o)}}return n.join("\n")})(t.metaJson);const e=(t=>{const n=[],e={...t.nodesJson,...t.groupsJson},o=(t=>t.sort(p))(Object.values(e).map((t=>t.ID)));for(const t of o){const o=e[t],s=l(o);n.push(s)}return n.join("\n")})(t.treeJson);return""===n?e:`${n}\n${e}`},emptySentenceJson:()=>({metaJson:{},treeJson:{nodesJson:{},groupsJson:{}}}),emptyMetaJson:()=>({}),emptyTreeJson:()=>({nodesJson:{},groupsJson:{}}),emptyTokenJson:()=>({ID:"_",FORM:"_",LEMMA:"_",UPOS:"_",XPOS:"_",FEATS:{},HEAD:-1,DEPREL:"_",DEPS:{},MISC:{}}),emptyFeatureJson:()=>({}),replaceArrayOfTokens:(t,n,e)=>{const o={},s={};let r=n[0];for(const t of e){const n={ID:"_",FORM:"_",LEMMA:"_",UPOS:"_",XPOS:"_",FEATS:{},HEAD:-1,DEPREL:"_",DEPS:{},MISC:{}};n.ID=r.toString(),n.FORM=t,o[n.ID]=n,r++}const c=e.length-n.length,i=n[0],l=n[n.length-1];for(const n of Object.values({...t.nodesJson,...t.groupsJson})){const t=JSON.parse(JSON.stringify(n)),e=u(t,i,l,c);"-1"!==e.ID&&(!0===f(e)?s[e.ID]=e:o[e.ID]=e)}return{nodesJson:o,groupsJson:s}},constructTextFromTreeJson:t=>{let n="";for(const e in t.nodesJson)if(t.nodesJson[e]&&!1===f(t.nodesJson[e])){const o=t.nodesJson[e],s=o.FORM,r="No"===o.MISC.SpaceAfter?"":" ";if(o.MISC.SpacesAfter){let t=o.MISC.SpacesAfter;for(const[n,e]of d)t=t.replaceAll(n,e);n=n+s+t;continue}n=n+s+r}return n}}}},n={};function e(o){if(n[o])return n[o].exports;var s=n[o]={exports:{}};return t[o](s,s.exports,e),s.exports}return e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e(989)})().default}));